<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coverage Report: angleMod.f90</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 20px;
            background-color: #f9f9f9;
        }
        .header {
            background-color: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .summary {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .metric {
            background-color: #ecf0f1;
            padding: 10px;
            border-radius: 3px;
            text-align: center;
            min-width: 120px;
        }
        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #27ae60;
        }
        .code-container {
            background-color: white;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            overflow: auto;
        }
        .code-line {
            display: flex;
            border-bottom: 1px solid #ecf0f1;
        }
        .line-number {
            background-color: #f8f9fa;
            padding: 2px 8px;
            width: 60px;
            text-align: right;
            border-right: 1px solid #dee2e6;
            color: #6c757d;
        }
        .execution-count {
            background-color: #f8f9fa;
            padding: 2px 8px;
            width: 80px;
            text-align: right;
            border-right: 1px solid #dee2e6;
            color: #495057;
        }
        .source-code {
            padding: 2px 8px;
            flex: 1;
            white-space: pre;
        }
        .executed { background-color: #d4edda; }
        .not-executed { background-color: #f8d7da; }
        .non-executable { background-color: #f8f9fa; }
        .footer {
            margin-top: 20px;
            padding: 15px;
            background-color: #e9ecef;
            border-radius: 5px;
            font-size: 0.9em;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Coverage Report: angleMod.f90</h1>
        <p>Generated from GCOV analysis of Fortran source code</p>
    </div>

    <div class="summary">
        <div class="metric">
            <div class="metric-value">35.6%</div>
            <div>Lines Executed</div>
            <div>73 total lines</div>
        </div>
        <div class="metric">
            <div class="metric-value">52.4%</div>
            <div>Branches Executed</div>
            <div>84 total branches</div>
        </div>
        <div class="metric">
            <div class="metric-value">100.0%</div>
            <div>Calls Executed</div>
            <div>27 total calls</div>
        </div>
    </div>

    <div class="code-container">
        <div class="code-line non-executable">
            <div class="line-number">0</div>
            <div class="execution-count">-</div>
            <div class="source-code">Source:angleMod.f90</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">0</div>
            <div class="execution-count">-</div>
            <div class="source-code">Graph:angleMod.gcno</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">0</div>
            <div class="execution-count">-</div>
            <div class="source-code">Data:angleMod.gcda</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">0</div>
            <div class="execution-count">-</div>
            <div class="source-code">Runs:57</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">1</div>
            <div class="execution-count">-</div>
            <div class="source-code">!! Angle calculations and coordinate transformations for ray tracing</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">2</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">3</div>
            <div class="execution-count">-</div>
            <div class="source-code">MODULE anglemod</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">4</div>
            <div class="execution-count">-</div>
            <div class="source-code">!! Provides angle calculations and coordinate transformations</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">5</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">6</div>
            <div class="execution-count">-</div>
            <div class="source-code">  USE MathConstants</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">7</div>
            <div class="execution-count">-</div>
            <div class="source-code">  USE SubTabulate</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">8</div>
            <div class="execution-count">-</div>
            <div class="source-code">  USE SourceReceiverPositions</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">9</div>
            <div class="execution-count">-</div>
            <div class="source-code">  USE SortMod</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">10</div>
            <div class="execution-count">-</div>
            <div class="source-code">  USE FatalError</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">11</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">12</div>
            <div class="execution-count">-</div>
            <div class="source-code">  IMPLICIT NONE</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">13</div>
            <div class="execution-count">-</div>
            <div class="source-code">  PUBLIC</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">14</div>
            <div class="execution-count">-</div>
            <div class="source-code">  SAVE</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">15</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">16</div>
            <div class="execution-count">-</div>
            <div class="source-code">  INTEGER          :: ialpha, ibeta</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">17</div>
            <div class="execution-count">-</div>
            <div class="source-code">  INTEGER, PRIVATE :: AllocateStatus</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">18</div>
            <div class="execution-count">-</div>
            <div class="source-code">  INTEGER,       PRIVATE, PARAMETER :: ENVFile = 5, PRTFile = 6</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">19</div>
            <div class="execution-count">-</div>
            <div class="source-code">  REAL (KIND=8), PRIVATE, PARAMETER :: c0 = 1500.0</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">20</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">21</div>
            <div class="execution-count">-</div>
            <div class="source-code">  TYPE AnglesStructure</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">22</div>
            <div class="execution-count">-</div>
            <div class="source-code">     INTEGER       :: Nalpha = 0, Nbeta = 1, iSingle_alpha = 0, iSingle_beta = 0</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">23</div>
            <div class="execution-count">-</div>
            <div class="source-code">     REAL (KIND=8) :: Dalpha, Dbeta</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">24</div>
            <div class="execution-count">-</div>
            <div class="source-code">     REAL (KIND=8), ALLOCATABLE:: alpha( : ), beta( : )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">25</div>
            <div class="execution-count">-</div>
            <div class="source-code">  END TYPE AnglesStructure</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">26</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">27</div>
            <div class="execution-count">-</div>
            <div class="source-code">  Type( AnglesStructure ) :: Angles</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">28</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">29</div>
            <div class="execution-count">-</div>
            <div class="source-code">CONTAINS</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">30</div>
            <div class="execution-count">28*</div>
            <div class="source-code">  SUBROUTINE ReadRayElevationAngles( freq, Depth, TopOpt, RunType )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">31</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">32</div>
            <div class="execution-count">-</div>
            <div class="source-code">    REAL      (KIND=8), INTENT( IN  ) :: freq, Depth</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">33</div>
            <div class="execution-count">-</div>
            <div class="source-code">    CHARACTER (LEN= 6), INTENT( IN  ) :: TopOpt, RunType</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">34</div>
            <div class="execution-count">-</div>
            <div class="source-code">    REAL      (KIND=8)                :: d_theta_recommended</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">35</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line executed">
            <div class="line-number">36</div>
            <div class="execution-count">28</div>
            <div class="source-code">    IF ( TopOpt( 6 : 6 ) == &#x27;I&#x27; ) THEN</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">37</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       READ( ENVFile, * ) Angles%Nalpha, Angles%iSingle_alpha ! option to trace a single beam</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">38</div>
            <div class="execution-count">-</div>
            <div class="source-code">    ELSE</div>
        </div>
        <div class="code-line executed">
            <div class="line-number">39</div>
            <div class="execution-count">28</div>
            <div class="source-code">       READ( ENVFile, * ) Angles%Nalpha</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">40</div>
            <div class="execution-count">-</div>
            <div class="source-code">    END IF</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">41</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line executed">
            <div class="line-number">42</div>
            <div class="execution-count">28</div>
            <div class="source-code">    IF ( Angles%Nalpha == 0 ) THEN   ! automatically estimate Nalpha to use</div>
        </div>
        <div class="code-line executed">
            <div class="line-number">43</div>
            <div class="execution-count">27</div>
            <div class="source-code">       IF ( RunType( 1 : 1 ) == &#x27;R&#x27; ) THEN</div>
        </div>
        <div class="code-line executed">
            <div class="line-number">44</div>
            <div class="execution-count">3</div>
            <div class="source-code">          Angles%Nalpha = 50         ! For a ray trace plot, we don&#x27;t want too many rays ...</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">45</div>
            <div class="execution-count">-</div>
            <div class="source-code">       ELSE</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">46</div>
            <div class="execution-count">-</div>
            <div class="source-code">          ! you&#x27;re letting ME choose? OK: ideas based on an isospeed ocean</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">47</div>
            <div class="execution-count">-</div>
            <div class="source-code">          ! limit based on phase of adjacent beams at maximum range</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">48</div>
            <div class="execution-count">24*</div>
            <div class="source-code">          Angles%Nalpha = MAX( INT( ( ( 0.3 * Pos%Rr( Pos%NRr ) ) * freq ) / c0 ), 300 )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">49</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">50</div>
            <div class="execution-count">-</div>
            <div class="source-code">          ! limit based on having beams that are thin with respect to the water depth</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">51</div>
            <div class="execution-count">-</div>
            <div class="source-code">          ! assumes also a full 360 degree angular spread of rays</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">52</div>
            <div class="execution-count">-</div>
            <div class="source-code">          ! Should check which Depth is used here, in case where there is a variable bathymetry</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">53</div>
            <div class="execution-count">24*</div>
            <div class="source-code">          d_theta_recommended = ATAN( Depth / ( 10.0 * Pos%Rr( Pos%NRr ) ) )</div>
        </div>
        <div class="code-line executed">
            <div class="line-number">54</div>
            <div class="execution-count">24</div>
            <div class="source-code">          Angles%Nalpha = MAX( INT( pi / d_theta_recommended ), Angles%Nalpha )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">55</div>
            <div class="execution-count">-</div>
            <div class="source-code">       END IF</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">56</div>
            <div class="execution-count">-</div>
            <div class="source-code">    END IF</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">57</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">58</div>
            <div class="execution-count">28*</div>
            <div class="source-code">    ALLOCATE( Angles%alpha( MAX( 3, Angles%Nalpha ) ), STAT = AllocateStatus )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">59</div>
            <div class="execution-count">28*</div>
            <div class="source-code">    IF ( AllocateStatus /= 0 ) CALL ERROUT( &#x27;ReadRayElevationAngles&#x27;, &#x27;Insufficient memory to store beam angles&#x27;  )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">60</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">61</div>
            <div class="execution-count">28*</div>
            <div class="source-code">    IF ( Angles%Nalpha &gt; 2 ) Angles%alpha( 3 ) = -999.9</div>
        </div>
        <div class="code-line executed">
            <div class="line-number">62</div>
            <div class="execution-count">28</div>
            <div class="source-code">    READ( ENVFile, * ) Angles%alpha</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">63</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">64</div>
            <div class="execution-count">28*</div>
            <div class="source-code">    CALL SubTab( Angles%alpha, Angles%Nalpha )</div>
        </div>
        <div class="code-line executed">
            <div class="line-number">65</div>
            <div class="execution-count">28</div>
            <div class="source-code">    CALL Sort(   Angles%alpha, Angles%Nalpha )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">66</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">67</div>
            <div class="execution-count">-</div>
            <div class="source-code">    ! full 360-degree sweep? remove duplicate beam</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">68</div>
            <div class="execution-count">-</div>
            <div class="source-code">    ! LP: Changed from TINY( ), see README.md.</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">69</div>
            <div class="execution-count">28*</div>
            <div class="source-code">    IF ( Angles%Nalpha &gt; 1 .AND. ABS( MOD( Angles%alpha( Angles%Nalpha ) - Angles%alpha( 1 ), &amp;</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">70</div>
            <div class="execution-count">-</div>
            <div class="source-code">       360.0D0 ) ) &lt; 10.0 * SPACING( 360.0D0 ) ) &amp;</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">71</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       Angles%Nalpha = Angles%Nalpha - 1</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">72</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line executed">
            <div class="line-number">73</div>
            <div class="execution-count">28</div>
            <div class="source-code">    WRITE( PRTFile, * ) &#x27;__________________________________________________________________________&#x27;</div>
        </div>
        <div class="code-line executed">
            <div class="line-number">74</div>
            <div class="execution-count">28</div>
            <div class="source-code">    WRITE( PRTFile, * )</div>
        </div>
        <div class="code-line executed">
            <div class="line-number">75</div>
            <div class="execution-count">28</div>
            <div class="source-code">    WRITE( PRTFile, * ) &#x27;   Number of beams in elevation   = &#x27;, Angles%Nalpha</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">76</div>
            <div class="execution-count">28*</div>
            <div class="source-code">    IF ( Angles%iSingle_alpha &gt; 0 ) WRITE( PRTFile, * ) &#x27;Trace only beam number &#x27;, Angles%iSingle_alpha</div>
        </div>
        <div class="code-line executed">
            <div class="line-number">77</div>
            <div class="execution-count">28</div>
            <div class="source-code">    WRITE( PRTFile, * ) &#x27;   Beam take-off angles (degrees)&#x27;</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">78</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">79</div>
            <div class="execution-count">28*</div>
            <div class="source-code">    IF ( Angles%Nalpha &gt;= 1 ) WRITE( PRTFile, &quot;( 5G14.6 )&quot; ) Angles%alpha( 1 : MIN( Angles%Nalpha, Number_to_Echo ) )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">80</div>
            <div class="execution-count">28*</div>
            <div class="source-code">    IF ( Angles%Nalpha &gt; Number_to_Echo ) WRITE( PRTFile,  &quot;( G14.6 )&quot; ) &#x27; ... &#x27;, Angles%alpha( Angles%Nalpha )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">81</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">82</div>
            <div class="execution-count">28*</div>
            <div class="source-code">    IF ( Angles%Nalpha &gt; 1 .AND. Angles%alpha( Angles%Nalpha ) == Angles%alpha( 1 ) ) &amp;</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">83</div>
            <div class="execution-count">#####</div>
            <div class="source-code">         CALL ERROUT( &#x27;ReadRayElevationAngles&#x27;, &#x27;First and last beam take-off angle are identical&#x27; )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">84</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line executed">
            <div class="line-number">85</div>
            <div class="execution-count">28</div>
            <div class="source-code">    IF ( TopOpt( 6 : 6 ) == &#x27;I&#x27; ) THEN</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">86</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       IF ( Angles%iSingle_alpha &lt; 1 .OR. Angles%iSingle_alpha &gt; Angles%Nalpha ) &amp;</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">87</div>
            <div class="execution-count">#####</div>
            <div class="source-code">            CALL ERROUT( &#x27;ReadRayElevationAngles&#x27;, &#x27;Selected beam, iSingle_alpha not in [ 1, Angles%Nalpha ]&#x27; )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">88</div>
            <div class="execution-count">-</div>
            <div class="source-code">    END IF</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">89</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line executed">
            <div class="line-number">90</div>
            <div class="execution-count">28</div>
            <div class="source-code">  END SUBROUTINE ReadRayElevationAngles</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">91</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">92</div>
            <div class="execution-count">-</div>
            <div class="source-code">  ! **********************************************************************!</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">93</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">94</div>
            <div class="execution-count">#####</div>
            <div class="source-code">  SUBROUTINE ReadRayBearingAngles( freq, TopOpt, RunType )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">95</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">96</div>
            <div class="execution-count">-</div>
            <div class="source-code">    REAL      (KIND=8), INTENT( IN ) :: freq</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">97</div>
            <div class="execution-count">-</div>
            <div class="source-code">    CHARACTER (LEN= 6), INTENT( IN ) :: TopOpt, RunType</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">98</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">99</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( TopOpt( 6 : 6 ) == &#x27;I&#x27; ) THEN</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">100</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       READ( ENVFile, * ) Angles%Nbeta, Angles%iSingle_beta ! option to trace a single beam</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">101</div>
            <div class="execution-count">-</div>
            <div class="source-code">    ELSE</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">102</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       READ( ENVFile, * ) Angles%Nbeta</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">103</div>
            <div class="execution-count">-</div>
            <div class="source-code">    END IF</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">104</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">105</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( Angles%Nbeta == 0 ) THEN   ! automatically estimate Nbeta to use</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">106</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       IF ( RunType( 1 : 1 ) == &#x27;R&#x27; ) THEN</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">107</div>
            <div class="execution-count">#####</div>
            <div class="source-code">          Angles%Nbeta = 50         ! For a ray trace plot, we don&#x27;t want too many rays ...</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">108</div>
            <div class="execution-count">-</div>
            <div class="source-code">       ELSE</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">109</div>
            <div class="execution-count">#####</div>
            <div class="source-code">          Angles%Nbeta = MAX( INT( ( ( 0.1 * Pos%rr( Pos%NRr ) ) * freq ) / c0 ), 300 )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">110</div>
            <div class="execution-count">-</div>
            <div class="source-code">       END IF</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">111</div>
            <div class="execution-count">-</div>
            <div class="source-code">    END IF</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">112</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">113</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    ALLOCATE( Angles%beta( MAX( 3, Angles%Nbeta ) ), STAT = AllocateStatus )</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">114</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( AllocateStatus /= 0 ) CALL ERROUT( &#x27;ReadRayBearingAngles&#x27;, &#x27;Insufficient memory to store beam angles&#x27;  )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">115</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">116</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( Angles%Nbeta &gt; 2 ) Angles%beta( 3 ) = -999.9</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">117</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    READ( ENVFile, * ) Angles%beta</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">118</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">119</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    CALL SubTab( Angles%beta, Angles%Nbeta )</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">120</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    CALL Sort(   Angles%beta, Angles%Nbeta )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">121</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">122</div>
            <div class="execution-count">-</div>
            <div class="source-code">    ! full 360-degree sweep? remove duplicate beam</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">123</div>
            <div class="execution-count">-</div>
            <div class="source-code">    ! LP: Changed from TINY( ), see README.md.</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">124</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( Angles%Nbeta &gt; 1 .AND. ABS( MOD( Angles%beta( Angles%Nbeta ) - Angles%beta( 1 ), &amp;</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">125</div>
            <div class="execution-count">-</div>
            <div class="source-code">       360.0D0 ) ) &lt; 10.0 * SPACING( 360.0D0 ) ) &amp;</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">126</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       Angles%Nbeta = Angles%Nbeta - 1</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">127</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">128</div>
            <div class="execution-count">-</div>
            <div class="source-code">    ! Nx2D CASE: beams must lie on rcvr radials--- replace beta with theta</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">129</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( RunType( 6 : 6 ) == &#x27;2&#x27; .AND. RunType( 1 : 1 ) /= &#x27;R&#x27; ) THEN</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">130</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       WRITE( PRTFile, * )</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">131</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       WRITE( PRTFile, * ) &#x27;Replacing beam take-off angles, beta, with receiver bearing lines, theta&#x27;</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">132</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       DEALLOCATE( Angles%beta )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">133</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">134</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       Angles%Nbeta = Pos%Ntheta</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">135</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       ALLOCATE( Angles%beta( MAX( 3, Angles%Nbeta ) ), STAT = AllocateStatus )</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">136</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       IF ( AllocateStatus /= 0 ) CALL ERROUT( &#x27;ReadRayBearingAngles&#x27;, &#x27;Insufficient memory to store beam angles&#x27;  )</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">137</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       Angles%beta( 1 : Angles%Nbeta ) = Pos%theta( 1 : Pos%Ntheta )   ! Nbeta should = Ntheta</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">138</div>
            <div class="execution-count">-</div>
            <div class="source-code">    END IF</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">139</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">140</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    WRITE( PRTFile, * )</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">141</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    WRITE( PRTFile, * ) &#x27;   Number of beams in bearing   = &#x27;, Angles%Nbeta</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">142</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( Angles%iSingle_beta &gt; 0 ) WRITE( PRTFile, * ) &#x27;Trace only beam number &#x27;, Angles%iSingle_beta</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">143</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    WRITE( PRTFile, * ) &#x27;   Beam take-off angles (degrees)&#x27;</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">144</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">145</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( Angles%Nbeta &gt;= 1 ) WRITE( PRTFile, &quot;( 5G14.6 )&quot; ) Angles%beta( 1 : MIN( Angles%Nbeta, Number_to_Echo ) )</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">146</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( Angles%Nbeta &gt; Number_to_Echo ) WRITE( PRTFile, &quot;( G14.6 )&quot; ) &#x27; ... &#x27;, Angles%beta( Angles%Nbeta )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">147</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">148</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( Angles%Nbeta &gt; 1 .AND. Angles%beta( Angles%Nbeta ) == Angles%beta( 1 ) ) &amp;</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">149</div>
            <div class="execution-count">#####</div>
            <div class="source-code">         CALL ERROUT( &#x27;ReadRayBearingAngles&#x27;, &#x27;First and last beam take-off angle are identical&#x27; )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">150</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">151</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( TopOpt( 6 : 6 ) == &#x27;I&#x27; ) THEN</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">152</div>
            <div class="execution-count">#####</div>
            <div class="source-code">       IF ( Angles%iSingle_beta &lt; 1 .OR. Angles%iSingle_beta &gt; Angles%Nbeta ) &amp;</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">153</div>
            <div class="execution-count">#####</div>
            <div class="source-code">            CALL ERROUT( &#x27;ReadRayBearingAngles&#x27;, &#x27;Selected beam, iSingle_beta not in [ 1, Angles%Nbeta ]&#x27; )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">154</div>
            <div class="execution-count">-</div>
            <div class="source-code">    END IF</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">155</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    Angles%beta  = DegRad * Angles%beta   ! convert to radians</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">156</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">157</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    Angles%Dbeta = 0.0</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">158</div>
            <div class="execution-count">#####</div>
            <div class="source-code">    IF ( Angles%Nbeta /= 1 ) Angles%Dbeta = ( Angles%beta( Angles%NBeta ) - Angles%beta( 1 ) ) / ( Angles%Nbeta - 1 )</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">159</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">160</div>
            <div class="execution-count">#####</div>
            <div class="source-code">  END SUBROUTINE ReadRayBearingAngles</div>
        </div>
        <div class="code-line non-executable">
            <div class="line-number">161</div>
            <div class="execution-count">-</div>
            <div class="source-code"></div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">162</div>
            <div class="execution-count">#####</div>
            <div class="source-code">END MODULE anglemod</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">162</div>
            <div class="execution-count">#####</div>
            <div class="source-code">END MODULE anglemod</div>
        </div>
        <div class="code-line not-executed">
            <div class="line-number">162</div>
            <div class="execution-count">#####</div>
            <div class="source-code">END MODULE anglemod</div>
        </div>
    </div>

    <div class="footer">
        <p><strong>Legend:</strong></p>
        <ul>
            <li><span style="background-color: #d4edda; padding: 2px 4px;">Green</span> - Executed lines</li>
            <li><span style="background-color: #f8d7da; padding: 2px 4px;">Red</span> - Not executed lines</li>
            <li><span style="background-color: #f8f9fa; padding: 2px 4px;">Gray</span> - Non-executable lines (comments, declarations)</li>
        </ul>
        <p><strong>Execution Count:</strong> Number of times each line was executed. ##### indicates never executed, - indicates non-executable.</p>
    </div>
</body>
</html>